{% extends "base.html" %}
{% block title %}Manage FAQs{% endblock %}
{% block body_content %}
<h2>Manage FAQs</h2>

{% if messages %}
<ul class="flashes">
    {% for category, message in messages %}
        <li class="{{ category }}">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<form method="POST" class="form-container">
    <label for="question">Question:</label>
    <input type="text" id="question" name="question" required>

    <label for="answer">Answer:</label>
    <textarea id="answer" name="answer" rows="4" required></textarea>

    {% if current_user.role == 'super_admin' %}
        <label for="tenant_id">Tenant:</label>
        <select name="tenant_id" id="tenant_id" required>
            {% for tenant in tenants %}
                <option value="{{ tenant.tenant_id }}" {% if tenant.tenant_id == tenant_id %}selected{% endif %}>{{ tenant.tenant_name }}</option>
            {% endfor %}
        </select>
    {% else %}
        <!-- Always use current_user.tenant_id for tenant admins -->
        <input type="hidden" name="tenant_id" value="{{ tenant_id }}">
    {% endif %}

    <button type="submit" class="button-primary">Add FAQ</button>
</form>

<h3>Existing FAQs</h3>
{% if faqs %}
    <table class="data-table">
        <thead>
            <tr><th>Question</th><th>Answer</th></tr>
        </thead>
        <tbody>
            {% for faq in faqs %}
                <tr>
                    <td>{{ faq.question }}</td>
                    <td>{{ faq.answer }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No FAQs found.</p>
{% endif %}
{% endblock %}
